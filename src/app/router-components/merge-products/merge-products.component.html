<div class="content" #container>
  <div class="top-bar" #topBar [@hideWhileScrolling] = "hideSearchBar ? 'hidden': 'showed'"
   [ngStyle]="{'top': this.container.offsetTop + 2 + 'px'}">
    <div class="top-bar__content">
      <div class="p-input-icon-right top-bar__searcher">
        <input class="top-bar__searcher-input" placeholder="wyszukiwanie" type="text" pInputText>
        <i class="pi pi-search"></i>
      </div>
      <p-dropdown class="top-bar__sorting" [options]="this.sortOptions" placeholder="Sortowanie" optionLabel="name"
       [(ngModel)]="this.sortOptionModel"></p-dropdown>
      <shop-page-select class="top-bar__page-select" [totalPages]="this.httpResponse.totalPages" [(ngModel)]="this.pageNumberModel"
        (ngModelChange)="this.onPageNumberChange($event)"></shop-page-select>
      <div class="top-bar__filters-icon" (click) = "this.openFiltersDialog()">
        <p>Filtry</p>
        <i class="pi pi-filter"></i>
      </div>
    </div>
  </div>

  <div class="main">
    <shop-products-filters (ngModelChange)="this.onFiltersChange($event)" class="main-filters"
      [(ngModel)]="this.filtersModel" (startChanging)="this.cancelPreviousRequest()"></shop-products-filters>
    <div class="main-tiles">
      <ng-container *ngIf="this.httpResponse">
        <ng-container *ngFor="let product of this.httpResponse.result">
          <shop-product-tile class="main-tiles__tile" [product]="product" (click)="this.navigateToProduct(product.id)">
          </shop-product-tile>
        </ng-container>
      </ng-container>
    </div>
  </div>

  <div class="bottom">
    <shop-page-select class="bottom__page-select" [totalPages]="this.httpResponse.totalPages" [(ngModel)]="this.pageNumberModel"
      (ngModelChange)="this.onPageNumberChange($event)"></shop-page-select>
    <div class="bottom__page-count">
      <p>Produkty na stronie:</p>
      <p-dropdown class="bottom__dropdown" [options]="this.pageOptions"
        (ngModelChange)="this.onPageSizeChange($event)" [(ngModel)]="this.pageSizeModel"></p-dropdown>
    </div>
  </div>

  <shop-filters-dialog [(visibility)]="this.filtersExpanded"></shop-filters-dialog>
  
  <div class="scroll-button" @opacityEntry *ngIf="this.lastScrollTop > 50" (click)="this.scrollUp()">
    <i class="pi pi-arrow-up"></i>
  </div>
</div>